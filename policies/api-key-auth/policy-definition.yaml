name: api-key-auth
version: v0.2.0
description: |
  The API Key Authentication policy secures APIs by requiring clients to include a
  valid API key with each request. The API key can be provided either as an HTTP
  header or as a query parameter, based on the API configuration.

parameters:
  type: object
  additionalProperties: false
  properties:
    key:
      type: string
      description: |
        The name of the header or query parameter that contains the API key.
        For headers: case-insensitive matching is used (e.g., "X-API-Key", "Authorization")
        For query parameters: exact name matching is used (e.g., "api_key", "token")
      validation:
        minLength: 1
        maxLength: 128

    in:
      type: string
      description: |
        Specifies where to look for the API key.
        Must be either "header" or "query".
      enum:
        - "header"
        - "query"

    value-prefix:
      type: string
      description: |
        Optional prefix that should be stripped from the API key value before validation.
        Case-insensitive matching and removal. Common use case is "Bearer " for Authorization headers.
        If specified, the prefix will be removed from the extracted value.
      validation:
        minLength: 1
        maxLength: 64

  required:
    - key
    - in

systemParameters:
  type: object
  properties: {}
